<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glow Catalog — Eyes on the Street</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root { --bg: #0a0a0f; --panel: rgba(255,255,255,0.04); --border: rgba(255,255,255,0.08); --text: #ccc; --dim: #555; }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'JetBrains Mono', monospace; background: var(--bg); color: var(--text); padding: 30px; }
    h1 { font-size: 14px; letter-spacing: 0.2em; text-transform: uppercase; color: #fff; margin-bottom: 6px; }
    .subtitle { font-size: 10px; color: var(--dim); letter-spacing: 0.1em; margin-bottom: 30px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 20px; }
    .card {
      background: var(--panel); border: 1px solid var(--border); border-radius: 8px;
      overflow: hidden; cursor: pointer; transition: border-color 0.3s, transform 0.2s;
    }
    .card:hover { border-color: rgba(255,255,255,0.2); transform: translateY(-2px); }
    .card.selected { border-color: #00ccff; box-shadow: 0 0 20px rgba(0,204,255,0.15); }
    .card canvas { width: 100%; height: 220px; display: block; }
    .card-info { padding: 12px 16px; border-top: 1px solid var(--border); }
    .card-name { font-size: 12px; font-weight: 600; color: #fff; margin-bottom: 4px; }
    .card-desc { font-size: 10px; color: var(--dim); line-height: 1.5; }
    .card-tags { margin-top: 6px; display: flex; gap: 6px; flex-wrap: wrap; }
    .tag { font-size: 9px; padding: 2px 6px; border-radius: 3px; background: rgba(255,255,255,0.06); color: var(--dim); letter-spacing: 0.05em; }

    /* Preview modal */
    .modal { display: none; position: fixed; inset: 0; z-index: 100; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
    .modal.open { display: flex; }
    .modal canvas { width: min(90vw, 900px); height: min(60vh, 500px); border-radius: 8px; }
    .modal-label { position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); font-size: 12px; color: #fff; letter-spacing: 0.15em; text-transform: uppercase; }
    .modal-close { position: fixed; top: 20px; right: 30px; font-size: 24px; color: var(--dim); cursor: pointer; background: none; border: none; font-family: inherit; }
    .modal-close:hover { color: #fff; }
  </style>
</head>
<body>
  <h1>Glow Effect Catalog</h1>
  <p class="subtitle">Click any card to preview full-size. Each shows bloom + core heatmap + station halos + dots.</p>
  <div class="grid" id="grid"></div>

  <div class="modal" id="modal">
    <canvas id="modalCanvas"></canvas>
    <div class="modal-label" id="modalLabel"></div>
    <button class="modal-close" onclick="document.getElementById('modal').classList.remove('open')">&times;</button>
  </div>

<script>
// Mock station data — simulates NYC cluster density
const stations = [
  // Midtown cluster
  {x:0.48,y:0.38,r:1.0},{x:0.50,y:0.40,r:0.9},{x:0.52,y:0.37,r:0.85},{x:0.49,y:0.42,r:0.7},
  {x:0.46,y:0.39,r:0.6},{x:0.54,y:0.41,r:0.55},{x:0.51,y:0.35,r:0.5},
  // Downtown cluster
  {x:0.42,y:0.62,r:0.8},{x:0.44,y:0.65,r:0.7},{x:0.40,y:0.60,r:0.6},{x:0.43,y:0.58,r:0.45},
  {x:0.45,y:0.63,r:0.5},{x:0.41,y:0.66,r:0.35},
  // Uptown cluster
  {x:0.45,y:0.18,r:0.6},{x:0.47,y:0.20,r:0.5},{x:0.43,y:0.22,r:0.4},{x:0.46,y:0.15,r:0.35},
  // Brooklyn
  {x:0.55,y:0.72,r:0.5},{x:0.58,y:0.75,r:0.45},{x:0.60,y:0.70,r:0.4},{x:0.57,y:0.68,r:0.35},
  // Scattered
  {x:0.30,y:0.50,r:0.3},{x:0.65,y:0.55,r:0.25},{x:0.35,y:0.30,r:0.2},{x:0.70,y:0.45,r:0.15},
  {x:0.25,y:0.70,r:0.2},{x:0.62,y:0.30,r:0.15},{x:0.38,y:0.80,r:0.1},{x:0.72,y:0.60,r:0.1},
  // Safety variety
  {x:0.33,y:0.45,r:0.55,safety:'caution'},{x:0.60,y:0.50,r:0.4,safety:'caution'},
  {x:0.28,y:0.65,r:0.3,safety:'avoid'},{x:0.68,y:0.35,r:0.2,safety:'avoid'},
];

const themes = [
  {
    name: 'Current — Ember',
    desc: 'Warm amber/orange. Fire in the dark. What you have now.',
    tags: ['warm', 'current', 'campfire'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(20,3,0,0.08)'],[0.15,'rgba(60,15,0,0.12)'],
      [0.3,'rgba(140,40,5,0.18)'],[0.5,'rgba(200,80,20,0.22)'],
      [0.7,'rgba(255,130,50,0.25)'],[1.0,'rgba(255,180,100,0.3)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(30,5,0,0.2)'],[0.15,'rgba(80,20,0,0.35)'],
      [0.3,'rgba(180,60,10,0.45)'],[0.5,'rgba(255,120,40,0.55)'],
      [0.7,'rgba(255,170,80,0.65)'],[0.9,'rgba(255,210,140,0.75)'],
      [1.0,'rgba(255,240,200,0.85)']
    ],
    dot: { safe:'#00ff88', caution:'#ff8800', avoid:'#ff2244' },
    bloomR: 90, coreR: 40
  },
  {
    name: 'Neon Pulse',
    desc: 'Cool cyan/electric blue. Cyberpunk surveillance aesthetic. High contrast against dark.',
    tags: ['cool', 'cyber', 'high-contrast'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,5,20,0.1)'],[0.15,'rgba(0,20,60,0.15)'],
      [0.3,'rgba(0,50,120,0.2)'],[0.5,'rgba(0,100,180,0.25)'],
      [0.7,'rgba(0,160,255,0.3)'],[1.0,'rgba(100,220,255,0.35)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,10,30,0.25)'],[0.15,'rgba(0,40,80,0.4)'],
      [0.3,'rgba(0,80,160,0.5)'],[0.5,'rgba(0,150,255,0.6)'],
      [0.7,'rgba(50,200,255,0.7)'],[0.9,'rgba(150,230,255,0.8)'],
      [1.0,'rgba(220,245,255,0.9)']
    ],
    dot: { safe:'#00ff88', caution:'#ffcc00', avoid:'#ff2244' },
    bloomR: 95, coreR: 42
  },
  {
    name: 'Plasma',
    desc: 'Purple-to-magenta gradient. Sci-fi energy field. Dense areas bloom white-hot.',
    tags: ['vibrant', 'sci-fi', 'dramatic'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(15,0,20,0.1)'],[0.15,'rgba(40,0,60,0.15)'],
      [0.3,'rgba(80,0,120,0.2)'],[0.5,'rgba(140,0,180,0.25)'],
      [0.7,'rgba(200,40,220,0.3)'],[1.0,'rgba(255,100,255,0.35)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(20,0,30,0.25)'],[0.15,'rgba(60,0,80,0.4)'],
      [0.3,'rgba(120,0,160,0.5)'],[0.5,'rgba(180,20,220,0.6)'],
      [0.7,'rgba(220,80,255,0.7)'],[0.9,'rgba(240,160,255,0.8)'],
      [1.0,'rgba(255,220,255,0.9)']
    ],
    dot: { safe:'#00ffcc', caution:'#ffaa00', avoid:'#ff1155' },
    bloomR: 85, coreR: 38
  },
  {
    name: 'Infrared',
    desc: 'Thermal camera look. Blue-cold to red-hot to white. Intuitive density reading.',
    tags: ['thermal', 'intuitive', 'scientific'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,0,30,0.08)'],[0.15,'rgba(0,0,80,0.12)'],
      [0.3,'rgba(60,0,100,0.18)'],[0.5,'rgba(140,0,80,0.22)'],
      [0.7,'rgba(200,30,30,0.28)'],[1.0,'rgba(255,100,50,0.32)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,0,40,0.2)'],[0.15,'rgba(10,0,100,0.35)'],
      [0.3,'rgba(80,0,120,0.45)'],[0.5,'rgba(180,0,60,0.55)'],
      [0.7,'rgba(240,60,20,0.7)'],[0.9,'rgba(255,180,50,0.8)'],
      [1.0,'rgba(255,255,200,0.9)']
    ],
    dot: { safe:'#00cc88', caution:'#ff6600', avoid:'#ff0033' },
    bloomR: 80, coreR: 35
  },
  {
    name: 'Phosphor',
    desc: 'Green terminal glow. Retro CRT monitor. Hacker aesthetic. Monochrome depth.',
    tags: ['retro', 'monochrome', 'matrix'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,10,0,0.08)'],[0.15,'rgba(0,25,0,0.12)'],
      [0.3,'rgba(0,50,5,0.18)'],[0.5,'rgba(0,90,10,0.22)'],
      [0.7,'rgba(0,140,20,0.28)'],[1.0,'rgba(30,200,50,0.32)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,15,0,0.2)'],[0.15,'rgba(0,40,0,0.35)'],
      [0.3,'rgba(0,80,10,0.45)'],[0.5,'rgba(0,140,20,0.55)'],
      [0.7,'rgba(20,200,40,0.7)'],[0.9,'rgba(80,240,100,0.8)'],
      [1.0,'rgba(180,255,200,0.9)']
    ],
    dot: { safe:'#00ff66', caution:'#ccff00', avoid:'#ff3300' },
    bloomR: 85, coreR: 38
  },
  {
    name: 'Aurora',
    desc: 'Green-to-violet gradient. Northern lights over the city. Ethereal, shifting feel.',
    tags: ['ethereal', 'gradient', 'organic'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,10,5,0.08)'],[0.15,'rgba(0,30,20,0.12)'],
      [0.3,'rgba(0,60,40,0.18)'],[0.5,'rgba(20,80,100,0.22)'],
      [0.7,'rgba(60,60,160,0.28)'],[1.0,'rgba(120,50,200,0.32)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(0,15,10,0.2)'],[0.15,'rgba(0,50,30,0.35)'],
      [0.3,'rgba(0,100,60,0.45)'],[0.5,'rgba(30,120,140,0.55)'],
      [0.7,'rgba(80,100,200,0.7)'],[0.9,'rgba(150,80,240,0.8)'],
      [1.0,'rgba(220,160,255,0.9)']
    ],
    dot: { safe:'#00ffaa', caution:'#ff9900', avoid:'#ff2266' },
    bloomR: 100, coreR: 45
  },
  {
    name: 'Molten',
    desc: 'Deep volcanic red. Magma under the streets. Intense, dangerous energy. Hot spots glow white.',
    tags: ['intense', 'volcanic', 'aggressive'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(15,0,0,0.1)'],[0.15,'rgba(40,0,0,0.15)'],
      [0.3,'rgba(80,5,0,0.2)'],[0.5,'rgba(140,15,0,0.25)'],
      [0.7,'rgba(200,30,5,0.3)'],[1.0,'rgba(255,60,15,0.35)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(20,0,0,0.25)'],[0.15,'rgba(60,5,0,0.4)'],
      [0.3,'rgba(120,15,0,0.5)'],[0.5,'rgba(200,40,0,0.6)'],
      [0.7,'rgba(255,80,10,0.72)'],[0.9,'rgba(255,160,60,0.82)'],
      [1.0,'rgba(255,230,180,0.92)']
    ],
    dot: { safe:'#00dd77', caution:'#ff8800', avoid:'#ff0022' },
    bloomR: 80, coreR: 36
  },
  {
    name: 'Ghost',
    desc: 'Minimal white/silver. Whisper-quiet. Data speaks, style doesn\'t shout. Clean & precise.',
    tags: ['minimal', 'clean', 'understated'],
    bloom: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(10,10,12,0.06)'],[0.15,'rgba(20,20,25,0.1)'],
      [0.3,'rgba(40,40,50,0.14)'],[0.5,'rgba(70,70,80,0.18)'],
      [0.7,'rgba(100,100,115,0.22)'],[1.0,'rgba(140,140,160,0.26)']
    ],
    core: [
      [0,'rgba(0,0,0,0)'],[0.05,'rgba(20,20,25,0.15)'],[0.15,'rgba(50,50,60,0.28)'],
      [0.3,'rgba(90,90,100,0.38)'],[0.5,'rgba(140,140,155,0.48)'],
      [0.7,'rgba(180,180,195,0.6)'],[0.9,'rgba(210,210,220,0.72)'],
      [1.0,'rgba(240,240,245,0.82)']
    ],
    dot: { safe:'#44ddaa', caution:'#ddaa44', avoid:'#dd4466' },
    bloomR: 70, coreR: 30
  }
];

function parseRGBA(str) {
  const m = str.match(/rgba?\((\d+),(\d+),(\d+),?([\d.]*)\)/);
  if (!m) return [0,0,0,0];
  return [+m[1], +m[2], +m[3], m[4] !== '' ? +m[4] : 1];
}

function lerpColor(stops, t) {
  t = Math.max(0, Math.min(1, t));
  for (let i = 0; i < stops.length - 1; i++) {
    if (t >= stops[i][0] && t <= stops[i+1][0]) {
      const f = (t - stops[i][0]) / (stops[i+1][0] - stops[i][0]);
      const a = parseRGBA(stops[i][1]), b = parseRGBA(stops[i+1][1]);
      return [
        Math.round(a[0] + (b[0]-a[0])*f),
        Math.round(a[1] + (b[1]-a[1])*f),
        Math.round(a[2] + (b[2]-a[2])*f),
        a[3] + (b[3]-a[3])*f
      ];
    }
  }
  return parseRGBA(stops[stops.length-1][1]);
}

function renderTheme(canvas, theme, large) {
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  const w = large ? rect.width : rect.width;
  const h = large ? rect.height : rect.height;
  canvas.width = w * dpr;
  canvas.height = h * dpr;
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);

  // Dark background
  ctx.fillStyle = '#0a0a12';
  ctx.fillRect(0, 0, w, h);

  // Subtle grid lines
  ctx.strokeStyle = 'rgba(255,255,255,0.02)';
  ctx.lineWidth = 0.5;
  for (let i = 0; i < w; i += 30) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,h); ctx.stroke(); }
  for (let i = 0; i < h; i += 30) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(w,i); ctx.stroke(); }

  const scale = large ? 1.4 : 1.0;

  // Pass 1: Bloom layer
  for (const s of stations) {
    const cx = s.x * w, cy = s.y * h;
    const maxR = theme.bloomR * s.r * scale;
    const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, maxR);
    for (let t = 0; t <= 1; t += 0.02) {
      const density = Math.max(0, 1 - t);
      const c = lerpColor(theme.bloom, density);
      grad.addColorStop(t, `rgba(${c[0]},${c[1]},${c[2]},${c[3] * s.r})`);
    }
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(cx, cy, maxR, 0, Math.PI * 2);
    ctx.fill();
  }

  // Pass 2: Core heatmap
  for (const s of stations) {
    const cx = s.x * w, cy = s.y * h;
    const maxR = theme.coreR * s.r * scale;
    const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, maxR);
    for (let t = 0; t <= 1; t += 0.02) {
      const density = Math.max(0, 1 - t);
      const c = lerpColor(theme.core, density);
      grad.addColorStop(t, `rgba(${c[0]},${c[1]},${c[2]},${c[3] * s.r})`);
    }
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(cx, cy, maxR, 0, Math.PI * 2);
    ctx.fill();
  }

  // Pass 3: Station glow halos
  for (const s of stations) {
    const cx = s.x * w, cy = s.y * h;
    const safety = s.safety || 'safe';
    const color = theme.dot[safety];
    const haloR = (4 + s.r * 14) * scale;
    const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, haloR);
    grad.addColorStop(0, color + '30');
    grad.addColorStop(1, color + '00');
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.arc(cx, cy, haloR, 0, Math.PI * 2);
    ctx.fill();
  }

  // Pass 4: Station dots
  for (const s of stations) {
    const cx = s.x * w, cy = s.y * h;
    const safety = s.safety || 'safe';
    const color = theme.dot[safety];
    const dotR = (1.5 + s.r * 3.5) * scale;
    ctx.fillStyle = color;
    ctx.globalAlpha = 0.9;
    ctx.beginPath();
    ctx.arc(cx, cy, dotR, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;

    // Stroke for avoid
    if (safety === 'avoid') {
      ctx.strokeStyle = color + '99';
      ctx.lineWidth = 1.5 * scale;
      ctx.beginPath();
      ctx.arc(cx, cy, dotR + 1.5 * scale, 0, Math.PI * 2);
      ctx.stroke();
    }
  }
}

// Build cards
const grid = document.getElementById('grid');
themes.forEach((theme, i) => {
  const card = document.createElement('div');
  card.className = 'card' + (i === 0 ? ' selected' : '');
  card.innerHTML = `
    <canvas data-idx="${i}"></canvas>
    <div class="card-info">
      <div class="card-name">${theme.name}</div>
      <div class="card-desc">${theme.desc}</div>
      <div class="card-tags">${theme.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
    </div>
  `;
  grid.appendChild(card);

  card.addEventListener('click', () => {
    document.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    const mc = document.getElementById('modalCanvas');
    document.getElementById('modalLabel').textContent = theme.name;
    document.getElementById('modal').classList.add('open');
    // Render after display so getBoundingClientRect works
    requestAnimationFrame(() => renderTheme(mc, theme, true));
  });
});

// Render all thumbnails
function renderAll() {
  document.querySelectorAll('.card canvas').forEach(c => {
    const idx = +c.dataset.idx;
    renderTheme(c, themes[idx], false);
  });
}

// Close modal on backdrop click
document.getElementById('modal').addEventListener('click', e => {
  if (e.target === e.currentTarget) e.currentTarget.classList.remove('open');
});

// Initial render + handle resize
renderAll();
window.addEventListener('resize', renderAll);
</script>
</body>
</html>
